<html>
<script type="text/javascript" src="../js/d3.js"></script>
<script type="text/javascript" src="../js/crossfilter.js"></script>
<script type="text/javascript" src="../js/dc.js"></script>
  <div id='example1'>
    <span class="chart-title">Example1 with "display: none" reset toggle</span>
    <br>
   <span class='reset' style='display: none;'>Current filter: <span class='filter'></span></span>
    <br>
    <a class='reset' href='javascript:dc.filterAll();dc.redrawAll();' style='display: none;'>reset</a>
    <div class="clearfix"></div>
</div>

<!-- Shannon's Example -->
<div id="example2">
    <span class="chart-title">Example2 with "visibility: hidden" reset toggle</span>
    <br>
    <span class='reset-hidden' style="visibility: hidden;">Filtered for: <span class="filter"></span></span><a class='reset' href='javascript:dc.filterAll();dc.redrawAll();' style='display: none;'>reset</a>

    <div class="clearfix"></div>
</div>

<script>    
    // Create basic pie chart showing included/excluded data points
    var myData = [{
        "include": "yes"
    }, {
        "include": "no"
    }, {
        "include": "yes"
    }, {
        "include": "yes"
    }];

    // create crossfilter, dimension, and group
    var myCrossfilter = crossfilter(myData);

    var includedDimension = myCrossfilter.dimension(function (d) {
        return d.include;
    });

    var includedGroup = includedDimension.group().reduceCount();
    
    // first example
    var pieChart1 = dc.pieChart('#example1');
    pieChart1.width(180)
        .height(180)
        .radius(80)
        .innerRadius(30)
        .dimension(includedDimension)
        .group(includedGroup)
        // .label(function (d) {
        // return d.data.key + ": " + d.data.value;
        // })
        .renderTitle(false)
    
    // second example
    var pieChart2 = dc.pieChart('#example2');
    pieChart2.width(180)
        .height(180)
        .radius(80)
        .innerRadius(30)
        .dimension(includedDimension)
        .group(includedGroup)
        .label(function (d) {
        return d.data.key + ": " + d.data.value;
        })
        .renderTitle(false)

    // render charts
    dc.renderAll();
</script>
</html>